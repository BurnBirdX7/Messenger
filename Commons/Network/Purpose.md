# Цели / Purposes
Каждое сообщение содержит: Заголовок и Тело.\
Заголовок состоит из частей: Длинна_Тела, Байт_Цели, Байт_Задачи.\
Байты цели описаны в этом файле.\
Байт задачи позволяет соотнести запрос с ответом.

## Общие

**Purpose::Common**

Сообщения с Байтом цели из этой группы могут быть отправлены как клиенту, так и серверу.

### Байты ответа
Сообщения помещеные байтами ACCEPTED и DECLINED считаются отвечающими сообщениями
и несут Байт задачи запроса на который они отвечают.

#### Accepted
ACCEPTED\
Обозначает успешное выполнение запрошеной операции.
Сообщение содержащее такой байт цели возвращает также запрошеное содержимое.

#### Declined
DECLINED\
Обозначает отказ в выполнении запрошеной операции или её неуспешное выполнение
(в таком случае содержит строку-сообщение об ошибке).

### Heartbeat
HEARTBEAT\
Такой байт высылается, если сторона хочет удостовериться в том, что соединение активно.

### Disconnect
DISCONNECT\
Сообщение помеченное таким байтом инициирует штатное прекращение соединения.

## К Серверу
**Purpose::to_server**\
Обращения к серевру

### Hello
HELLO\
*Содержит*: MESSAGE_API_MAJOR_VERSION и MESSAGE_API_MINOR_VERSION
- байты, которые указывают на то,
какой набор Байтов цели использует клиент.

### Login
LOGIN\
*Содержит*: requestLogin, password (null-terminated strings).\
При удачной попытке авторизации в ответ сервер должен выслать ACCEPTED сообщение вместе с session_id и session_hash.

### Logoff
LOGOFF\
*Не содежит ничего*.\
При получении такого сообщения сервер должен ликвидировать сессиюб ассоциированную с соединением из которого получено 
данное сообщение.

### Restore Session
RESTORE_SESSION\
*Содержит*: session_id, session_hash.\
Запрос на восстановление существующей сессии.
Сервер возвращает ACCEPTED, если авторизация успешна.

### Register New User
REGISTER_USR\
*Содрежит*: login, password.\
Запрос на создание нового пользователя

### Get UserID
GET_USER_ID\
*Содержит*: nickname.\
Запрос на получение UserID.
Сервер возвращает ACCEPTED и ID если такой ползователь был найден и DECLINED в ином случае.

### Get ChatID
GET_CHAT_ID\
*Содержит*: chat_name.\
Запрос на получение ChatID.
Сервер возвращает ACCEPTED и ID если такая группа была найдена.

## Get chat info by ID
GET_CHAT_BY_ID\
*Содержит*: chat_id
Запрашивает информацию о чате (id, имя, название, наличие пароля, тип)

## Get chat info by chat's nickname
GET_CHAT_BY_NAME\
*Содержит*: chat_name
Делает то же что и "Get chat info by ID", но для инентификации использует никнейм чата

### Join сhat
JOIN_CHAT\
*Содержит*: chat_id [, chat_password]\
Запрос добавления пользолавтеля в чат. Пользователь не может быть добавлен в личный чат.
ACCEPTED если пользователь добавлен.

### Leave сhat
LEAVE_CHAT\
*Содержит*: chat_id.\
Запрос полльзователя на выход из чата. Пользователь не может покинуть личный чат.

### Create сhat
CREATE_CHAT\
*Содержит*: has_pass, chat_name [, password].\
Запрос на создание чата. Создающий пользователь получает роль администратора

### Start chat with a user
START_CHAT\
*Содержит*: user_id.\
Запрос на создание личного чата с пользователем. Никто не администратор.

### Delete chat
DELETE_CHAT\
*Содержит*: chat_id.\
Запрос на удаление чата, только администратор может удалить чат

### Change nickname of a chat
RENAME_CHAT\
*Содержит*: chat_id, chat_name.\
Запрос на смену уникального имени чата.

### Set chat administrator
SET_CHAT_ADMIN\
*Содержит*: chat_id, user_id.\
Запрос на добавление администратора в чат.
Может быть выполнен только существующим администратором чата.

## Remove chat administrator
REM_CHAT_ADMIN\
*Содержит*: chat_id, user_id.\
Зарпос на удаление администратора чата.
Может быть выполнен только другим администратором чата.

### Send Message
SEND_CHAT_MSG\
*Содержит*: chat_id, chat_message_content.\
Отправка сообщения в чат.

### Request Messages From Chat
REQUEST_CHAT_MSG\
*Содержит*: chat_id, time_from [, time_to].\
Запрашивает сообщения начиная с даты time_from и до текущего времени или до времени time_to, если такое указано.
Сервер возвращает все сообщения которые были обновлены или созданы в данный промежуток времени.

### Mark chat seen
MARK_SEEN\
*Содержит*: chat_id, timestamp.\

### Remove message from chat
REMOVE_CHAT_MSG\
*Содержит*: msg_id.\
Запрашивает удаление сообщения из чата.
Сообщение будет удалено только для пользователя сделавшего запрос.

### Delete message from chat
DELETE_CHAT_MSG\
*Содержит*: msg_id.\
Запрашивает удаление сообщения из чата для всех участников.
Может сделать только автор сообщения или администратор.

## К Клиенту
**Purpose::to_client**\
Сообщения от вервера к клиенту

### Send Message To Client
MSG_NOTIFY\
*Содержит*: chat_id, chat_message_pack.\
Если в ответ будет получен DECLINE, то сессия будет приостановлена

### Deauthorize
DEAUTH\
*Не содержит ничего*.\
Сообщает клиенту о том, что его сессия была деавторизована
